**Состояние гонки** (Race condition) - это ошибка возникающая в многопоточном программировании, когда несколько потоков одновременно обращаются к одному и тому же ресурсу для чтения и записи, что приводи к нежелательному поведению программы.  [OG](https://mipt.ru/upload/e08/f_edv8-arphcxl1tgs.pdf)

[OG](https://defuse.ca/race-conditions-in-web-applications.htm)
Пример `->`

```Python
counter = 0

def increment():
    global counter
    for _ in range(1000000):
        counter += 1

thread1 = Thread(target=increment)
thread2 = Thread(target=increment)

thread1.start()
thread2.start()
thread1.join()
thread2.join()

print(counter)

```

В программе есть глобальная переменная `counter` к которой обращаются 2 потока.  Данные в переменной зависят от выполнения одного или другого потока. Механизмы предотвращения гонки это механизмы синхронизации (семафоры, мьтексы)

Виды состояний гонки [OG](https://defcon.ru/os-security/888/):
- [[TOCTOU]] (Time-of-Check Time-of-Use) — возможность изменения состояния объекта гонки между моментом проверки возможности доступа и собственно моментом доступа.
- Deadlock — ситуация, являющаяся следствием неправильной синхронизации, при которой параллельные потоки исполнения не могут получить доступ к объекту гонки, ожидая друг друга.
- Состояния гонки, связанные с созданием файлов (в т.ч. временных) — возможность подменить **создаваемый** программой файл другим/удалить этот файл.

#CWE-362
